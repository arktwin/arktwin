syntax = "proto3";

package arktwin.center.services;

import "arktwin/common/data/machine_timestamp.proto";
import "arktwin/common/data/virtual_timestamp.proto";
import "google/protobuf/empty.proto";
import "scalapb/scalapb.proto";
import "validate/validate.proto";

service Clock {
  rpc Read(google.protobuf.Empty) returns (ClockBase);
  rpc Subscribe(google.protobuf.Empty) returns (stream ClockBase);
}

message ClockBase {
  option (scalapb.message).extends = "arktwin.center.services.ClockBaseTrait";
  common.data.MachineTimestamp base_machine_timestamp = 1 [(validate.rules).message.required = true];
  common.data.VirtualTimestamp base_timestamp = 2 [(validate.rules).message.required = true];
  double clock_speed = 3 [(validate.rules).double = {gte: 0}];
}
